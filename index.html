<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CatÃ¡logo EstÃ¡tico para Distribuidores</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 50;
    }
    .modal-content {
      background-color: white;
      border-radius: 0.5rem;
      padding: 2rem;
      max-width: 900px;
      width: 100%;
      display: flex;
      gap: 2rem;
    }
    .modal img {
      max-width: 300px;
      object-fit: contain;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-900">
  <header class="bg-white shadow p-4 text-center">
    <h1 class="text-2xl font-bold">CatÃ¡logo Mayorista - Productos Digitales</h1>
  </header>

  <div class="max-w-7xl mx-auto p-4">
    <div class="mb-6 grid grid-cols-1 md:grid-cols-4 gap-4">
      <input id="searchInput" type="text" placeholder="Buscar producto..." class="p-2 border rounded">
      <select id="categoryFilter" class="p-2 border rounded">
        <option value="">Todas las categorÃ­as</option>
      </select>
      <select id="stockFilter" class="p-2 border rounded">
        <option value="">Todos</option>
        <option value="SI">EN STOCK</option>
        <option value="NO">SIN STOCK</option>
      </select>
      <div>
        <input id="priceRange" type="range" min="0" max="100" value="100" step="1" class="w-full">
        <div id="priceValue" class="text-center text-sm text-gray-700">Filtrando hasta $100</div>
      </div>
    </div>

    <div id="catalogo" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
  </div>

  <footer class="bg-white text-center p-4 text-sm text-gray-500">
    Contacto WhatsApp: +51 929809650
  </footer>

  <div id="modalContainer" class="hidden"></div>

  <script>
    const productos = window.productos || [];

    function mostrarProductos() {
      const contenedor = document.getElementById("catalogo");
      const search = document.getElementById("searchInput").value.toLowerCase();
      const categoria = document.getElementById("categoryFilter").value;
      const stock = document.getElementById("stockFilter").value;
      const precioMax = parseFloat(document.getElementById("priceRange").value);

      document.getElementById("priceValue").textContent = `Filtrando hasta $${precioMax}`;

      contenedor.innerHTML = "";

      productos
        .filter(p => {
          const precioValido = !isNaN(precioMax) && parseFloat(p.precio_unidad) <= precioMax;
          return (
            (!search || p.producto.toLowerCase().includes(search)) &&
            (!categoria || p.categoria === categoria) &&
            (!stock || p.stock.toUpperCase() === stock.toUpperCase()) &&
            precioValido
          );
        })
        .forEach(p => {
          const card = document.createElement("div");
          card.className = "bg-white p-4 shadow rounded flex flex-col";

          card.innerHTML = `
            <img src="${p.url_foto}" alt="${p.producto}" class="h-40 object-contain mb-2">
            <h2 class="text-lg font-bold mb-1 text-blue-600 cursor-pointer hover:underline" onclick='mostrarDetalle(${JSON.stringify(p)})'>${p.producto}</h2>
            <p class="text-sm mb-1 font-semibold">${p.suscripcion}</p>
            <p class="text-sm mb-2">${p.descripcion}</p>
            <ul class="text-sm mb-4">
              <li>ðŸŽ¯ Unidad: $${p.precio_unidad}</li>
              <li>ðŸ“¦ ${p.pack_1}: $${p.precio_1}</li>
              <li>ðŸ“¦ ${p.pack_2}: $${p.precio_2}</li>
            </ul>
            <div class="grid grid-cols-1 gap-2">
              <a href="https://wa.me/51929809650?text=${encodeURIComponent(`Hola, quiero pedir:\nðŸ›’ ${p.producto}\nâœ… OpciÃ³n: Unidad\nðŸ’² Precio: $${p.precio_unidad}`)}" target="_blank" class="bg-green-500 hover:scale-105 transition-all duration-200 font-semibold px-4 py-2 rounded shadow text-white">Comprar Unidad</a>
              <a href="https://wa.me/51929809650?text=${encodeURIComponent(`Hola, quiero pedir:\nðŸ›’ ${p.producto}\nâœ… OpciÃ³n: ${p.pack_1}\nðŸ’² Precio: $${p.precio_1}`)}" target="_blank" class="bg-green-600 hover:scale-105 transition-all duration-200 font-semibold px-4 py-2 rounded shadow text-white">Comprar ${p.pack_1}</a>
              <a href="https://wa.me/51929809650?text=${encodeURIComponent(`Hola, quiero pedir:\nðŸ›’ ${p.producto}\nâœ… OpciÃ³n: ${p.pack_2}\nðŸ’² Precio: $${p.precio_2}`)}" target="_blank" class="bg-green-700 hover:scale-105 transition-all duration-200 font-semibold px-4 py-2 rounded shadow text-white">Comprar ${p.pack_2}</a>
            </div>
          `;

          contenedor.appendChild(card);
        });
    }

    function mostrarDetalle(p) {
      const modal = document.createElement("div");
      modal.className = "modal";
      modal.innerHTML = `
        <div class="modal-content">
          <img src="${p.url_foto}" alt="${p.producto}">
          <div class="flex-1">
            <h2 class="text-2xl font-bold mb-2">${p.producto}</h2>
            <p class="mb-2 text-gray-700">${p.descripcion}</p>
            <ul class="mb-4">
              <li>ðŸŽ¯ Unidad: $${p.precio_unidad}</li>
              <li>ðŸ“¦ ${p.pack_1}: $${p.precio_1}</li>
              <li>ðŸ“¦ ${p.pack_2}: $${p.precio_2}</li>
            </ul>
            <div class="grid grid-cols-1 gap-2">
              <a href="https://wa.me/51929809650?text=${encodeURIComponent(`Hola, quiero pedir:\nðŸ›’ ${p.producto}\nâœ… OpciÃ³n: Unidad\nðŸ’² Precio: $${p.precio_unidad}`)}" target="_blank" class="bg-green-500 font-semibold px-4 py-2 rounded shadow text-white text-center">Comprar Unidad</a>
              <a href="https://wa.me/51929809650?text=${encodeURIComponent(`Hola, quiero pedir:\nðŸ›’ ${p.producto}\nâœ… OpciÃ³n: ${p.pack_1}\nðŸ’² Precio: $${p.precio_1}`)}" target="_blank" class="bg-green-600 font-semibold px-4 py-2 rounded shadow text-white text-center">Comprar ${p.pack_1}</a>
              <a href="https://wa.me/51929809650?text=${encodeURIComponent(`Hola, quiero pedir:\nðŸ›’ ${p.producto}\nâœ… OpciÃ³n: ${p.pack_2}\nðŸ’² Precio: $${p.precio_2}`)}" target="_blank" class="bg-green-700 font-semibold px-4 py-2 rounded shadow text-white text-center">Comprar ${p.pack_2}</a>
            </div>
            <button onclick="document.getElementById('modalContainer').innerHTML = ''; document.getElementById('modalContainer').classList.add('hidden');" class="mt-4 text-red-500 hover:underline">Cerrar</button>
          </div>
        </div>
      `;
      document.getElementById("modalContainer").innerHTML = '';
      document.getElementById("modalContainer").appendChild(modal);
      document.getElementById("modalContainer").classList.remove("hidden");
    }

    function cargarFiltros() {
      const categorias = [...new Set(productos.map(p => p.categoria).filter(Boolean))];
      const select = document.getElementById("categoryFilter");
      categorias.forEach(c => {
        const opt = document.createElement("option");
        opt.value = c;
        opt.textContent = c;
        select.appendChild(opt);
      });
    }

    document.getElementById("searchInput").addEventListener("input", mostrarProductos);
    document.getElementById("categoryFilter").addEventListener("change", mostrarProductos);
    document.getElementById("stockFilter").addEventListener("change", mostrarProductos);
    document.getElementById("priceRange").addEventListener("input", mostrarProductos);

    cargarFiltros();
    mostrarProductos();
  </script>
</body>
</html>


